<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" media="screen" href="1985.css">
</head>
<body>
  <div id="screen" oncontextmenu="return false;">
    <div id="bar">
      <img src="assets/menu.png" id="menu" class="bar" />
      <div id="barra">
        <div id="bar-title">MS-DOS Executive</div>
      </div>
      <img src="assets/minimize.png" id="nemsei" class="bar" />
    </div>
    <div id="baragain">
      <div class="baritem">File</div>
      <div class="baritem">View</div>
      <div class="baritem">Special</div>
    </div>
    <div id="main">
      <div id="directorybar">
        <div class="drive"><div>A</div  ><img src="assets/drive.png"></div>
        <div class="directory">A:WIN101</div>
      </div>
      <div id="files">
        <div class="folder item" id="1980">1980</div>
      </div>
    </div>
    <div id="bottom"></div>
  </div>
  <script>
    var files = [ "COMMAND.COM", "FORMAT.COM", "CHKDSK.COM", "SYS.COM", "DISKCOPY.COM", "DISKCOMP.COM", "COMP.COM", "DATE.COM", "TIME.COM", "MODE.COM", "EDLIN.COM", "DEBUG.COM", "LINK.EXE", "BASIC.COM", "BASICA.COM", "ART.BAS", "SAMPLES.BAS", "MOTGAGE.BAS", "COLORBAR.BAS", "BUG.BAS", "CALENDAR.BAS", "MUSIC.BAS", "DONKEY.BAS", "BLUE.BAS", "HUMOR.BAS", "POP.BAS", "FORTY.BAS", "DANDY.BAS", "MARCH.BAS", "STARS.BAS", "HAT.BAS", "SCALES.BAS", "SAKURA.BAS", "CIRCLE.BAS", "PIECHART.BAS", "SPACE.BAS", "BALL.BAS", "COMM.BAS", "21.MAP" ];
    localStorage.setItem("files", JSON.stringify(files));
    var eita = JSON.parse(localStorage.getItem("files"));
    eita.forEach(element => {
      document.getElementById("files").insertAdjacentHTML("beforeend", `<div class='item'>${element}</div>`)
    });
    console.log("A:WIN101/");
    const ok = document.getElementsByClassName("item");
    var bruh = Array.from(ok);
    var lastSelected, lastSelectedClass;
    bruh.forEach(element => {
      element.onclick = event => {
        if (event.detail === 1) {
          if (lastSelected) lastSelected.setAttribute("class", lastSelectedClass);
          lastSelected = element;
          lastSelectedClass = element.getAttribute("class");
          element.setAttribute("class", "selected " + lastSelectedClass);
        } else if (event.detail === 2) {
          if (element.innerHTML == "1980") {
            console.log("ok");
          } else {
            alert("Cannot run " + element.innerHTML);
          }
        }
      }
    });
  </script>
</body>
</html>
